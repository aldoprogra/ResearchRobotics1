<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Third Assignment Documentation: /root/Desktop/ResearchRobotics1/ResearchRobotics1/final_assignment/script/master.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Third Assignment Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2e21daf2292f5cb1ea6246113bcce9c4.html">final_assignment</a></li><li class="navelem"><a class="el" href="dir_1a7acab99ef41bac07a9c28139d39bfc.html">script</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">master.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Using ROS framework, this script allows the user to switch to different modalities: autonomously reach a x,y coordinate, drive the robot with the keyboard and drive the robot with keyboard but avoiding collisions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a49c4a1243cdd12b3a0c9ec6d0257fd8c"><td class="memItemLeft" align="right" valign="top"><a id="a49c4a1243cdd12b3a0c9ec6d0257fd8c" name="a49c4a1243cdd12b3a0c9ec6d0257fd8c"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>master.intro</b> ()</td></tr>
<tr class="memdesc:a49c4a1243cdd12b3a0c9ec6d0257fd8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow to print the main men√π, doesn't have argument and returned variable neither. <br /></td></tr>
<tr class="separator:a49c4a1243cdd12b3a0c9ec6d0257fd8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa69429913e6259aa39d5e66d76e4dd72"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8py.html#aa69429913e6259aa39d5e66d76e4dd72">master.todist</a> (x, y, x_pos, y_pos)</td></tr>
<tr class="memdesc:aa69429913e6259aa39d5e66d76e4dd72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use pitagora formula for calculating the distance between the robot and goal position.  <a href="master_8py.html#aa69429913e6259aa39d5e66d76e4dd72">More...</a><br /></td></tr>
<tr class="separator:aa69429913e6259aa39d5e66d76e4dd72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad928f47bd025964a4156139cf9623587"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8py.html#ad928f47bd025964a4156139cf9623587">master.move_base</a> ()</td></tr>
<tr class="memdesc:ad928f47bd025964a4156139cf9623587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represent the first motion option.  <a href="master_8py.html#ad928f47bd025964a4156139cf9623587">More...</a><br /></td></tr>
<tr class="separator:ad928f47bd025964a4156139cf9623587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf619fa0453584a14e9fa6f43e528ac0"><td class="memItemLeft" align="right" valign="top"><a id="adf619fa0453584a14e9fa6f43e528ac0" name="adf619fa0453584a14e9fa6f43e528ac0"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>master.manual_show</b> ()</td></tr>
<tr class="memdesc:adf619fa0453584a14e9fa6f43e528ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print to the user which command press for start controlling the robot with the keyboard. <br /></td></tr>
<tr class="separator:adf619fa0453584a14e9fa6f43e528ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c015c455582e1e44438a37eaa9fdc5"><td class="memItemLeft" align="right" valign="top"><a id="ad7c015c455582e1e44438a37eaa9fdc5" name="ad7c015c455582e1e44438a37eaa9fdc5"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>master.getch</b> ()</td></tr>
<tr class="separator:ad7c015c455582e1e44438a37eaa9fdc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa88247fcb5607d46d7f43e6a3dbe9c3b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8py.html#aa88247fcb5607d46d7f43e6a3dbe9c3b">master.manual</a> ()</td></tr>
<tr class="memdesc:aa88247fcb5607d46d7f43e6a3dbe9c3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the second option for the robot motion in the simulation.  <a href="master_8py.html#aa88247fcb5607d46d7f43e6a3dbe9c3b">More...</a><br /></td></tr>
<tr class="separator:aa88247fcb5607d46d7f43e6a3dbe9c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae656eb04353a906f4abfbbef612e331b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8py.html#ae656eb04353a906f4abfbbef612e331b">master.clbk_laser</a> (msg)</td></tr>
<tr class="memdesc:ae656eb04353a906f4abfbbef612e331b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the callback whenever new data in /scan topic is ready.  <a href="master_8py.html#ae656eb04353a906f4abfbbef612e331b">More...</a><br /></td></tr>
<tr class="separator:ae656eb04353a906f4abfbbef612e331b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b433ea76d3b1ce511e1361719d4e55d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8py.html#a9b433ea76d3b1ce511e1361719d4e55d">master.take_action</a> (min_fright, min_front, min_fleft)</td></tr>
<tr class="memdesc:a9b433ea76d3b1ce511e1361719d4e55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Takes into account the closest obstacle distance for moving the robot in the opposite direction the function is used in the assisted motion drive for force the robot to not crash.  <a href="master_8py.html#a9b433ea76d3b1ce511e1361719d4e55d">More...</a><br /></td></tr>
<tr class="separator:a9b433ea76d3b1ce511e1361719d4e55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56ba658dd92447c947686d663b3b6148"><td class="memItemLeft" align="right" valign="top"><a id="a56ba658dd92447c947686d663b3b6148" name="a56ba658dd92447c947686d663b3b6148"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>master.assisted_manual_show</b> ()</td></tr>
<tr class="memdesc:a56ba658dd92447c947686d663b3b6148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display the command to the user for controlling the robot, and how to exit the modality and come back to the menu. <br /></td></tr>
<tr class="separator:a56ba658dd92447c947686d663b3b6148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1045ec6d5e05bf651e110e9800502e11"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8py.html#a1045ec6d5e05bf651e110e9800502e11">master.assisted_manual</a> ()</td></tr>
<tr class="memdesc:a1045ec6d5e05bf651e110e9800502e11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is the third modality.  <a href="master_8py.html#a1045ec6d5e05bf651e110e9800502e11">More...</a><br /></td></tr>
<tr class="separator:a1045ec6d5e05bf651e110e9800502e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1835cdc0fc647a2c5b5ccf8b5e6e1778"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="master_8py.html#a1835cdc0fc647a2c5b5ccf8b5e6e1778">master.main</a> ()</td></tr>
<tr class="memdesc:a1835cdc0fc647a2c5b5ccf8b5e6e1778"><td class="mdescLeft">&#160;</td><td class="mdescRight">In the main the cde handles the modalities:  <a href="master_8py.html#a1835cdc0fc647a2c5b5ccf8b5e6e1778">More...</a><br /></td></tr>
<tr class="separator:a1835cdc0fc647a2c5b5ccf8b5e6e1778"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Using ROS framework, this script allows the user to switch to different modalities: autonomously reach a x,y coordinate, drive the robot with the keyboard and drive the robot with keyboard but avoiding collisions. </p>
<p >In the README file is explained how run the simulation. </p><dl class="section author"><dt>Author</dt><dd>Sinatra Gesualdo </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>16/05/2022</dd></dl>
<p>Subscribes to: <br  />
 /odom /move_base/status /scan Publishes to: <br  />
 /cmd_vel /move_base/cancel -rospy</p><ul>
<li>pure python module for interfacing with ROS workspace </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1045ec6d5e05bf651e110e9800502e11" name="a1045ec6d5e05bf651e110e9800502e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1045ec6d5e05bf651e110e9800502e11">&#9670;&nbsp;</a></span>assisted_manual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def master.assisted_manual </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is the third modality. </p>
<p >After updating the distance between robot and closest distance, if the robot is too close take_action take control otherwise the user uses can control the robot as he wishes. </p>

</div>
</div>
<a id="ae656eb04353a906f4abfbbef612e331b" name="ae656eb04353a906f4abfbbef612e331b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae656eb04353a906f4abfbbef612e331b">&#9670;&nbsp;</a></span>clbk_laser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def master.clbk_laser </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is the callback whenever new data in /scan topic is ready. </p>
<p >The long list ranges of the topic is processed for getting closest obstacle distance in front, right and left direction of the robot. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>the message coming from the sensor, published in the /scan topic </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>min_fright float minimum distance in the right direction </dd>
<dd>
min_front float minimum distance in the front direction </dd>
<dd>
min_fleft float minimum distance in the left direction </dd></dl>

</div>
</div>
<a id="a1835cdc0fc647a2c5b5ccf8b5e6e1778" name="a1835cdc0fc647a2c5b5ccf8b5e6e1778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1835cdc0fc647a2c5b5ccf8b5e6e1778">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def master.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In the main the cde handles the modalities: </p>
<ul>
<li><code>move_base</code> -&gt; planning </li>
<li><code>manual</code> -&gt; manual control </li>
<li><code>assisted_manual</code> -&gt; assisted obstacle avoidance </li>
</ul>

</div>
</div>
<a id="aa88247fcb5607d46d7f43e6a3dbe9c3b" name="aa88247fcb5607d46d7f43e6a3dbe9c3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa88247fcb5607d46d7f43e6a3dbe9c3b">&#9670;&nbsp;</a></span>manual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def master.manual </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is the second option for the robot motion in the simulation. </p>
<p >it is possible in this modality to control the robot with the keyboard. At every command is associated a different value of speed that will published to /cmd_vel </p>

</div>
</div>
<a id="ad928f47bd025964a4156139cf9623587" name="ad928f47bd025964a4156139cf9623587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad928f47bd025964a4156139cf9623587">&#9670;&nbsp;</a></span>move_base()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def master.move_base </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represent the first motion option. </p>
<p >In this function is asked coordinates to the user the goal is published in /move_base/goal topic and the feedback is displayed to the user. Both at the end and during the motion towards the goal, the user can cancel the current goal and choose another one. </p>

</div>
</div>
<a id="a9b433ea76d3b1ce511e1361719d4e55d" name="a9b433ea76d3b1ce511e1361719d4e55d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b433ea76d3b1ce511e1361719d4e55d">&#9670;&nbsp;</a></span>take_action()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def master.take_action </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_fright</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_front</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>min_fleft</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Takes into account the closest obstacle distance for moving the robot in the opposite direction the function is used in the assisted motion drive for force the robot to not crash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min_fright</td><td>float minimum distance in the right direction @parmam min_front float minimum distance in the front direction </td></tr>
    <tr><td class="paramname">min_fright</td><td>float minimum distance in the left direction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa69429913e6259aa39d5e66d76e4dd72" name="aa69429913e6259aa39d5e66d76e4dd72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa69429913e6259aa39d5e66d76e4dd72">&#9670;&nbsp;</a></span>todist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def master.todist </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use pitagora formula for calculating the distance between the robot and goal position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>position of the robot </td></tr>
    <tr><td class="paramname">y</td><td>position of the robot </td></tr>
    <tr><td class="paramname">x_goal</td><td>x coordinate of the goal </td></tr>
    <tr><td class="paramname">y_goal</td><td>y coordinate of the goal </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a float number, the distance </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
